(function(){function e(e){const i=window.document.getElementById("livesell-product-modal"),o=window.document.getElementById("livesell-product-iframe");"OPEN"===e.action?(M.contentWindow.postMessage({data:"server",code:e.code},D),o.src=e.url,i.style.display="flex",_.classList.add("livesell-floating-modal"),_.style.width=`${Y.width}px`,_.style.height=`${Y.height}px`,M.style.width="100%",M.style.height="100%",_.style.bottom="10px",_.style.left="10px",e.options&&e.options.addDraggableOverlay&&t(),m(),b()):(z.keepProductVisible||(i.style.display="none",o.src=""),_.classList.remove("livesell-floating-modal"),_.style.width=null,_.style.height=null,_.style.top=null,_.style.bottom="0px",_.style.left="0px",M.style.width=null,M.style.height=null,n(),h(),H())}function t(){O.style.display="flex",O.addEventListener("touchend",o),O.addEventListener("touchmove",s),O.addEventListener("touchstart",d)}function n(){O.style.display="none",O.removeEventListener("touchend",o),O.removeEventListener("touchmove",s),O.removeEventListener("touchstart",d)}function i(e,t){_&&(F=_.offsetTop,K=_.offsetLeft,G=K+e,N=F+t)}function o(){}function l(e,t){G&&N&&(F+=t,K+=e,a(F,K),G+=e,N+=t)}function d(e){e.preventDefault(),_&&(G=e.touches[0].clientX,N=e.touches[0].clientY,F=_.offsetTop,K=_.offsetLeft)}function s(e){r(e.touches[0])}function r(e){K+=e.clientX-G,F+=e.clientY-N,a(F,K),G=e.clientX,N=e.clientY}function a(e,t){const n=u(e),i=c(t);F=n,K=i,_.style.bottom=window.innerHeight-n-_.offsetHeight+"px",_.style.left=i+"px"}function c(e){return Math.max(Math.min(e,window.innerWidth-_.offsetWidth/2),-_.offsetWidth/2)}function u(e){return Math.max(Math.min(e,window.innerHeight-_.offsetHeight/2),-_.offsetHeight/2)}function m(){window.addEventListener("resize",f)}function h(){window.removeEventListener("resize",f)}function f(e){if(!F||!K)return;const t=F*(window.innerHeight-_.offsetHeight)/(Z-_.offsetHeight),n=K*(window.innerWidth-_.offsetWidth)/(Q-_.offsetWidth);a(t,n),Z=window.innerHeight,Q=window.innerWidth}function p(e){ee=!0,$=e.clientX,j=e.clientY,J=_.offsetWidth,q=_.offsetHeight,S.style.display="flex",document.addEventListener("mousemove",g),document.addEventListener("mouseup",E),P.addEventListener("touchmove",y),P.addEventListener("touchend",E)}function v(e){var t=16/9;const n=J+e.clientX-$,i=n/t;w(n,i)||(_.style.width=n+"px",_.style.height=i+"px")}function w(e,t){return e<Y.minWidth||t<Y.minHeight||e>Y.maxWidth||t>Y.maxHeight||e>window.innerWidth||t>window.innerHeight}function g(e){e.preventDefault(),v(e)}function y(e){e.preventDefault(),v(e.touches[0])}function E(e){ee=!1,S.style.display="none",document.removeEventListener("mouseup",E),document.removeEventListener("mousemove",g),P.addEventListener("touchend",E),P.removeEventListener("touchmove",y)}function x(e){e.preventDefault(),p(e.touches[0])}function L(e){e.preventDefault(),p(e)}function b(){P.style.display="flex",P.addEventListener("mousedown",L),P.addEventListener("touchstart",x)}function H(){P.style.display="none",P.removeEventListener("mousedown",L),P.removeEventListener("touchstart",x)}const W=document.currentScript,z={meetingURL:W.getAttribute("data-livesell-url"),keepProductVisible:"true"===W.getAttribute("data-keep-product-visible")};if(console.log(z),!z.meetingURL)return void console.error("ERROR: Please provide meeting URL in livesell integration script.");const R=z.meetingURL,D=new URL(R).origin,A=document.createElement("div");A.style.position="relative";const C=document.createElement("div");C.id="livesell-transparent-overlay",A.appendChild(C);const I=document.createElement("div");I.id="livesell-meeting-modal";const M=document.createElement("iframe");M.id="livesell-meeting-iframe",M.setAttribute("allow","camera; microphone; fullscreen"),M.frameBorder="0",I.appendChild(M);const k=document.createElement("div");k.id="livesell-draggable-overlay",I.appendChild(k);const B=document.createElement("div");B.id="livesell-resizable-overlay",I.appendChild(B),A.appendChild(I);const T=document.createElement("div");T.id="livesell-product-modal",A.appendChild(T);const U=document.createElement("iframe");U.id="livesell-product-iframe",U.style.width="100%",U.style.height="100%",U.style.border="none",U.style.overflow="hidden",U.setAttribute("allowfullscreen",""),U.setAttribute("allow",""),U.frameBorder="0",T.appendChild(U),document.body.appendChild(A);const X=document.createElement("style");X.innerHTML="\n  #livesell-meeting-modal {\n  position: fixed;\n  z-index: 2147483646;\n  height: 100%;\n  width: 100vw;\n  bottom: 0px;\n  left: 0px;\n  display: none;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.5);\n  will-change: transform;\n}\n\n.livesell-floating-modal {\n  left: 10px;\n  bottom: 10px;\n  border-radius: 6px !important;\n  overflow: hidden !important;\n}\n\n#livesell-meeting-iframe {\n  position: relative;\n  z-index: 2147483645;\n  border-radius: 6px;\n  overflow: hidden;\n  height: calc(100% - 32px);\n  width: calc(100% - 32px);\n}\n\n#livesell-draggable-overlay {\n  position: absolute;\n  z-index: 2147483647;\n  height: 100%;\n  width: calc(100% - 110px);\n  display: none;\n  cursor: move;\n}\n\n#livesell-resizable-overlay {\n  position: absolute;\n  z-index: 2147483647;\n  height: 48px;\n  width: 48px;\n  right: 0;\n  top: 0;\n  display: none;\n  cursor: nesw-resize;\n}\n\n#livesell-transparent-overlay {\n  position: fixed;\n  z-index: 2147483647;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n  display: none;\n  cursor: nesw-resize;\n}\n\n#livesell-product-modal {\n  position: fixed;\n  z-index: 1000000000;\n  height: 100%;\n  width: 100vw;\n  top: 0px;\n  left: 0px;\n  display: none;\n  overscroll-behavior: none;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.5);\n}\n  ",document.head.appendChild(X);const _=window.document.getElementById("livesell-meeting-modal"),O=window.document.getElementById("livesell-draggable-overlay"),P=window.document.getElementById("livesell-resizable-overlay"),S=window.document.getElementById("livesell-transparent-overlay"),V=window.matchMedia("only screen and (max-width: 760px)").matches,Y=V?{minWidth:160,minHeight:90,width:240,height:135,maxWidth:320,maxHeight:180}:{minWidth:240,minHeight:135,width:320,height:180,maxWidth:640,maxHeight:360};window.addEventListener("message",t=>{if(t.origin!==D)return;const n=t.data;switch(n.actionType){case"LIVESELL_DRAG_START":i(n.mouseX,n.mouseY);break;case"LIVESELL_DRAG_MOUSEMOVE":l(n.offsetX,n.offsetY);break;case"LIVESELL_DRAG_END":o();break;case"PRODUCT_PAGE":e(n)}t.data.fullscreen?(M.src=`${R}?autoJoin=true&userName=${t.data.userName}`,_.style.display="flex",document.body.style.overflow="hidden"):!1===t.data.fullscreen&&(document.body.style.overflow=null,_.style.display="none",M.src="")});let G,N,$,j,J,q,F=0,K=10,Q=window.innerWidth,Z=window.innerHeight,ee=!1})();