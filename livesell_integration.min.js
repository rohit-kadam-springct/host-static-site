(function(){function e(e){e.action===O.GET&&V.contentWindow.postMessage({code:e.code,dataAttributes:W},C)}function t(e){if(!W.supportFloatingVideo&&!V.src)return;const t=window.document.getElementById("livesell-product-modal"),o=window.document.getElementById("livesell-product-iframe");e.action===O.OPEN?(V.contentWindow.postMessage({data:"server",code:e.code},C),o.src=e.url,t.style.display="flex",Y.classList.add("livesell-floating-modal"),Y.style.width=`${M.width}px`,Y.style.height=`${M.height}px`,V.style.width="100%",V.style.height="100%",Y.style.bottom="10px",Y.style.left="10px",e.options&&e.options.addDraggableOverlay&&n(),h(),A()):(W.keepProductVisible||(t.style.display="none",o.src=""),Y.classList.remove("livesell-floating-modal"),Y.style.width=null,Y.style.height=null,Y.style.top=null,Y.style.bottom="0px",Y.style.left="0px",V.style.width=null,V.style.height=null,i(),f(),T())}function n(){$.style.display="flex",$.addEventListener("touchend",l),$.addEventListener("touchmove",r),$.addEventListener("touchstart",s)}function i(){$.style.display="none",$.removeEventListener("touchend",l),$.removeEventListener("touchmove",r),$.removeEventListener("touchstart",s)}function o(e,t){Y&&(te=Y.offsetTop,ne=Y.offsetLeft,J=ne+e,Z=te+t)}function l(){}function d(e,t){J&&Z&&(te+=t,ne+=e,c(te,ne),J+=e,Z+=t)}function s(e){e.preventDefault(),Y&&(J=e.touches[0].clientX,Z=e.touches[0].clientY,te=Y.offsetTop,ne=Y.offsetLeft)}function r(e){a(e.touches[0])}function a(e){ne+=e.clientX-J,te+=e.clientY-Z,c(te,ne),J=e.clientX,Z=e.clientY}function c(e,t){const n=m(e),i=u(t);te=n,ne=i,Y.style.bottom=window.innerHeight-n-Y.offsetHeight+"px",Y.style.left=i+"px"}function u(e){return Math.max(Math.min(e,window.innerWidth-Y.offsetWidth/2),-Y.offsetWidth/2)}function m(e){return Math.max(Math.min(e,window.innerHeight-Y.offsetHeight/2),-Y.offsetHeight/2)}function h(){window.addEventListener("resize",p)}function f(){window.removeEventListener("resize",p)}function p(e){if(!te||!ne)return;const t=te*(window.innerHeight-Y.offsetHeight)/(oe-Y.offsetHeight),n=ne*(window.innerWidth-Y.offsetWidth)/(ie-Y.offsetWidth);c(t,n),oe=window.innerHeight,ie=window.innerWidth}function v(e){le=!0,q=e.clientX,K=e.clientY,Q=Y.offsetWidth,ee=Y.offsetHeight,F.style.display="flex",document.addEventListener("mousemove",w),document.addEventListener("mouseup",x),j.addEventListener("touchmove",y),j.addEventListener("touchend",x)}function E(e){const t=Q+e.clientX-q,n=t/R;g(t,n)||(Y.style.width=t+"px",Y.style.height=n+"px")}function g(e,t){return e>M.minWidth&&t>M.minHeight&&e<M.maxWidth&&t<M.maxHeight&&e<window.innerWidth&&t<window.innerHeight&&e/2>-Y.offsetLeft}function w(e){e.preventDefault(),E(e)}function y(e){e.preventDefault(),E(e.touches[0])}function x(e){le=!1,F.style.display="none",document.removeEventListener("mouseup",x),document.removeEventListener("mousemove",w),j.addEventListener("touchend",x),j.removeEventListener("touchmove",y)}function L(e){e.preventDefault(),v(e.touches[0])}function b(e){e.preventDefault(),v(e)}function A(){j.style.display="flex",j.addEventListener("mousedown",b),j.addEventListener("touchstart",L)}function T(){j.style.display="none",j.removeEventListener("mousedown",b),j.removeEventListener("touchstart",L)}const R=16/9,D={PRODUCT_PAGE:"PRODUCT_PAGE",DRAG_START:"LIVESELL_DRAG_START",DRAG_MOUSEMOVE:"LIVESELL_DRAG_MOUSEMOVE",DRAG_END:"LIVESELL_DRAG_END",DATA_ATTRIBUTES:"LIVESELL_DATA_ATTRIBUTES"},O={OPEN:"OPEN",CLOSE:"CLOSE",GET:"GET"},S={MESSAGE:"message",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",MOUSELEAVE:"mouseleave",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",RESIZE:"resize"},H=window.matchMedia("only screen and (max-width: 760px)").matches,M=H?{minWidth:160,minHeight:90,width:240,height:135,maxWidth:320,maxHeight:180}:{minWidth:240,minHeight:135,width:320,height:180,maxWidth:640,maxHeight:360},U=document.currentScript,W={meetingURL:U.getAttribute("data-livesell-url"),supportFloatingVideo:"true"===U.getAttribute("data-support-floating-video"),keepProductVisible:"true"===U.getAttribute("data-keep-product-visible")};if(!W.meetingURL)return void console.error("ERROR: Please provide meeting URL in livesell integration script.");const _=W.meetingURL,C=new URL(_).origin,G=document.createElement("div");G.style.position="relative";const z=document.createElement("div");z.id="livesell-transparent-overlay",G.appendChild(z);const I=document.createElement("div");I.id="livesell-meeting-modal";const V=document.createElement("iframe");V.id="livesell-meeting-iframe",V.setAttribute("allow","camera; microphone; fullscreen; autoplay"),V.frameBorder="0",I.appendChild(V);const P=document.createElement("div");P.id="livesell-draggable-overlay",I.appendChild(P);const B=document.createElement("div");B.id="livesell-resizable-overlay",I.appendChild(B),G.appendChild(I);const N=document.createElement("div");N.id="livesell-product-modal",G.appendChild(N);const k=document.createElement("iframe");k.id="livesell-product-iframe",k.style.width="100%",k.style.height="100%",k.style.border="none",k.style.overflow="hidden",k.setAttribute("allowfullscreen",""),k.setAttribute("allow",""),k.frameBorder="0",N.appendChild(k),document.body.appendChild(G);const X=document.createElement("style");X.innerHTML="\n  #livesell-meeting-modal {\n  position: fixed;\n  z-index: 2147483646;\n  height: 100%;\n  width: 100vw;\n  bottom: 0px;\n  left: 0px;\n  display: none;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.5);\n  will-change: transform;\n}\n\n.livesell-floating-modal {\n  left: 10px;\n  bottom: 10px;\n  border-radius: 6px !important;\n  overflow: hidden !important;\n}\n\n#livesell-meeting-iframe {\n  position: relative;\n  z-index: 2147483645;\n  border-radius: 6px;\n  overflow: hidden;\n  height: calc(100% - 32px);\n  width: calc(100% - 32px);\n}\n\n#livesell-draggable-overlay {\n  position: absolute;\n  z-index: 2147483647;\n  height: 100%;\n  width: calc(100% - 110px);\n  display: none;\n  cursor: move;\n}\n\n#livesell-resizable-overlay {\n  position: absolute;\n  z-index: 2147483647;\n  height: 48px;\n  width: 48px;\n  right: 0;\n  top: 0;\n  display: none;\n  cursor: nesw-resize;\n}\n\n#livesell-transparent-overlay {\n  position: fixed;\n  z-index: 2147483647;\n  height: 100%;\n  width: 100%;\n  left: 0;\n  top: 0;\n  display: none;\n  cursor: nesw-resize;\n}\n\n#livesell-product-modal {\n  position: fixed;\n  z-index: 1000000000;\n  height: 100%;\n  width: 100vw;\n  top: 0px;\n  left: 0px;\n  display: none;\n  overscroll-behavior: none;\n  justify-content: center;\n  align-items: center;\n  background: rgba(0, 0, 0, 0.5);\n}\n  ",document.head.appendChild(X);const Y=window.document.getElementById("livesell-meeting-modal"),$=window.document.getElementById("livesell-draggable-overlay"),j=window.document.getElementById("livesell-resizable-overlay"),F=window.document.getElementById("livesell-transparent-overlay");window.addEventListener(S.MESSAGE,n=>{if(n.origin!==C)return;const i=n.data;switch(i.actionType){case D.DRAG_START:o(i.mouseX,i.mouseY);break;case D.DRAG_MOUSEMOVE:d(i.offsetX,i.offsetY);break;case D.DRAG_END:l();break;case D.PRODUCT_PAGE:t(i);break;case D.DATA_ATTRIBUTES:e(i)}n.data.fullscreen?(V.src=`${_}?autoJoin=true&userName=${n.data.userName}`,Y.style.display="flex",document.body.style.overflow="hidden"):!1===n.data.fullscreen&&(document.body.style.overflow=null,Y.style.display="none",V.src="")});let J,Z,q,K,Q,ee,te=0,ne=10,ie=window.innerWidth,oe=window.innerHeight,le=!1})();
